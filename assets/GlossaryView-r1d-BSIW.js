import{d as x,u as we,S as ye,o as d,b as E,e as l,f as h,m as ae,g as t,P as he,K as ke,T as be,I as k,C as f,H as g,D as o,J as C,s,_ as m,U as q,r as _,c as A,E as u,V as M,p as V,F as Ce,Q as $e,W as J,Y as Q,Z,$ as r,a0 as Ve}from"./index-CKnRBt-b.js";import{u as je}from"./glossaryStore-CfcoCNia.js";import{_ as W,b as Y,c as X,a as ee}from"./CardTitle.vue_vue_type_script_setup_true_lang-BkVt8ECE.js";import{_ as te,a as se,b as T}from"./Label.vue_vue_type_script_setup_true_lang-B3RIBudV.js";var De=x({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(c){const a=c;we();const i=ye();return(v,b)=>(d(),E(t(he),ae(a,{id:t(i).descriptionId}),{default:l(()=>[h(v.$slots,"default")]),_:3},16,["id"]))}}),Ie=De;const le=x({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(c){const a=c,i=ke(a,"class"),v=be(i);return(b,$)=>(d(),E(t(Ie),ae({"data-slot":"dialog-description"},t(v),{class:t(k)("text-muted-foreground text-sm",a.class)}),{default:l(()=>[h(b.$slots,"default")]),_:3},16,["class"]))}}),oe=x({__name:"DialogFooter",props:{class:{}},setup(c){const a=c;return(i,v)=>(d(),f("div",{"data-slot":"dialog-footer",class:g(t(k)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a.class))},[h(i.$slots,"default")],2))}}),Ee={"data-slot":"table-container",class:"relative w-full overflow-auto"},Be=x({__name:"Table",props:{class:{}},setup(c){const a=c;return(i,v)=>(d(),f("div",Ee,[o("table",{"data-slot":"table",class:g(t(k)("w-full caption-bottom text-sm",a.class))},[h(i.$slots,"default")],2)]))}}),Fe=x({__name:"TableBody",props:{class:{}},setup(c){const a=c;return(i,v)=>(d(),f("tbody",{"data-slot":"table-body",class:g(t(k)("[&_tr:last-child]:border-0",a.class))},[h(i.$slots,"default")],2))}}),S=x({__name:"TableCell",props:{class:{}},setup(c){const a=c;return(i,v)=>(d(),f("td",{"data-slot":"table-cell",class:g(t(k)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a.class))},[h(i.$slots,"default")],2))}}),z=x({__name:"TableRow",props:{class:{}},setup(c){const a=c;return(i,v)=>(d(),f("tr",{"data-slot":"table-row",class:g(t(k)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a.class))},[h(i.$slots,"default")],2))}}),O=x({__name:"TableHead",props:{class:{}},setup(c){const a=c;return(i,v)=>(d(),f("th",{"data-slot":"table-head",class:g(t(k)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a.class))},[h(i.$slots,"default")],2))}}),Me=x({__name:"TableHeader",props:{class:{}},setup(c){const a=c;return(i,v)=>(d(),f("thead",{"data-slot":"table-header",class:g(t(k)("[&_tr]:border-b",a.class))},[h(i.$slots,"default")],2))}}),Te={class:"glossary-view"},Se={class:"max-w-5xl mx-auto space-y-6"},Ue={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Pe={class:"space-y-1"},He={class:"text-muted-foreground"},ze={class:"flex gap-2"},Oe={class:"flex flex-col sm:flex-row gap-4 items-start"},Ke={class:"flex-1 space-y-2 w-full"},Re={class:"flex-1 space-y-2 w-full"},Ge={class:"pt-7"},Le={key:0,class:"text-sm text-destructive mt-2"},Ne={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},qe={class:"relative"},Ae={class:"border rounded-md"},Je={class:"flex flex-col items-center gap-2"},Qe={key:0},Ze={key:1},We={key:0,class:"flex gap-2"},Ye=["onClick"],Xe={key:0,class:"flex justify-between items-center mt-4 pt-4 border-t"},et={class:"text-sm text-muted-foreground"},tt={class:"space-y-4 py-4"},st={class:"mt-0.5"},lt={key:0,class:"h-2 w-2 rounded-full bg-primary"},ot={class:"mt-0.5"},at={key:0,class:"h-2 w-2 rounded-full bg-primary"},rt=x({__name:"GlossaryView",setup(c){const a=je(),i=_(""),v=_(""),b=_(""),$=_(""),j=_(!1),w=_("merge"),K=_(null),B=_(null),D=_(!1),I=_(null),y=_(null),U=A(()=>{const p=i.value.trim().toLowerCase();return p?Object.entries(a.glossary).filter(([e,n])=>e.toLowerCase().includes(p)||n.toLowerCase().includes(p)):Object.entries(a.glossary)}),F=A(()=>Object.keys(a.glossary).length),re={render(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("circle",{cx:"11",cy:"11",r:"8"}),r("path",{d:"m21 21-4.3-4.3"})])}},ne={render(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("path",{d:"M5 12h14"}),r("path",{d:"M12 5v14"})])}},R={render(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("path",{d:"M3 6h18"}),r("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),r("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),r("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),r("line",{x1:"14",x2:"14",y1:"11",y2:"17"})])}},ue={render(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),r("polyline",{points:"17 8 12 3 7 8"}),r("line",{x1:"12",x2:"12",y1:"3",y2:"15"})])}},ie={render(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[r("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),r("polyline",{points:"7 10 12 15 17 10"}),r("line",{x1:"12",x2:"12",y1:"15",y2:"3"})])}},de={render(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},[r("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),r("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),r("path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1"}),r("path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1"})])}};function P(){$.value="";const p=v.value.trim(),e=b.value.trim();if(!p){$.value="请输入源语言词汇";return}if(a.hasEntry(p)){$.value="该词条已存在";return}a.addEntry(p,e),v.value="",b.value=""}function ce(p,e){y.value={source:p,target:e}}function G(){y.value&&(a.updateEntry(y.value.source,y.value.target),y.value=null)}function L(){y.value=null}function pe(p){I.value=p,D.value=!0}function fe(){I.value&&(a.removeEntry(I.value),I.value=null,D.value=!1)}function ve(){K.value?.click()}function me(p){const e=p.target,n=e.files?.[0];n&&(B.value=n,j.value=!0),e.value=""}async function _e(){if(B.value)try{await a.importFromFile(B.value,{strategy:w.value}),B.value=null,j.value=!1}catch(p){alert("导入失败："+(p instanceof Error?p.message:"未知错误"))}}function ge(){a.exportToFile()}function xe(){confirm("确定要清空所有词条吗？此操作不可恢复。")&&a.clear()}return(p,e)=>(d(),f("div",Te,[o("div",Se,[o("div",Ue,[o("div",Pe,[e[9]||(e[9]=o("h1",{class:"text-3xl font-bold tracking-tight"},"词汇表管理",-1)),o("p",He," 管理翻译词汇表，共 "+C(F.value)+" 个词条 ",1)]),o("div",ze,[s(t(m),{variant:"outline",onClick:ve},{default:l(()=>[s(ue,{class:"mr-2 h-4 w-4"}),e[10]||(e[10]=u(" 导入 ",-1))]),_:1}),s(t(m),{variant:"outline",onClick:ge},{default:l(()=>[s(ie,{class:"mr-2 h-4 w-4"}),e[11]||(e[11]=u(" 导出 ",-1))]),_:1})])]),o("input",{ref_key:"fileInputRef",ref:K,type:"file",accept:".json,.jsonc",class:"hidden",onChange:me},null,544),s(t(W),null,{default:l(()=>[s(t(Y),null,{default:l(()=>[s(t(X),{class:"text-lg"},{default:l(()=>[...e[12]||(e[12]=[u("添加新词条",-1)])]),_:1}),s(t(te),null,{default:l(()=>[...e[13]||(e[13]=[u(" 添加源语言词汇及其对应的目标语言翻译 ",-1)])]),_:1})]),_:1}),s(t(ee),null,{default:l(()=>[o("div",Oe,[o("div",Ke,[s(t(se),{for:"new-source"},{default:l(()=>[...e[14]||(e[14]=[u("源语言",-1)])]),_:1}),s(t(T),{id:"new-source",modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=n=>v.value=n),placeholder:"例如：API",onKeyup:M(P,["enter"])},null,8,["modelValue"])]),o("div",Re,[s(t(se),{for:"new-target"},{default:l(()=>[...e[15]||(e[15]=[u("目标语言",-1)])]),_:1}),s(t(T),{id:"new-target",modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=n=>b.value=n),placeholder:"例如：应用程序接口",onKeyup:M(P,["enter"])},null,8,["modelValue"])]),o("div",Ge,[s(t(m),{onClick:P},{default:l(()=>[s(ne,{class:"mr-2 h-4 w-4"}),e[16]||(e[16]=u(" 添加 ",-1))]),_:1})])]),$.value?(d(),f("p",Le,C($.value),1)):V("",!0)]),_:1})]),_:1}),s(t(W),null,{default:l(()=>[s(t(Y),null,{default:l(()=>[o("div",Ne,[o("div",null,[s(t(X),{class:"text-lg"},{default:l(()=>[...e[17]||(e[17]=[u("词条列表",-1)])]),_:1}),s(t(te),null,{default:l(()=>[...e[18]||(e[18]=[u(" 点击目标语言列可直接编辑，点击删除按钮移除词条 ",-1)])]),_:1})]),o("div",qe,[s(re,{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s(t(T),{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=n=>i.value=n),placeholder:"搜索词条...",class:"pl-9 w-full sm:w-64"},null,8,["modelValue"])])])]),_:1}),s(t(ee),null,{default:l(()=>[o("div",Ae,[s(t(Be),null,{default:l(()=>[s(t(Me),null,{default:l(()=>[s(t(z),null,{default:l(()=>[s(t(O),{class:"w-[45%]"},{default:l(()=>[...e[19]||(e[19]=[u("源语言",-1)])]),_:1}),s(t(O),{class:"w-[45%]"},{default:l(()=>[...e[20]||(e[20]=[u("目标语言",-1)])]),_:1}),s(t(O),{class:"w-[10%] text-right"},{default:l(()=>[...e[21]||(e[21]=[u("操作",-1)])]),_:1})]),_:1})]),_:1}),s(t(Fe),null,{default:l(()=>[U.value.length===0?(d(),E(t(z),{key:0},{default:l(()=>[s(t(S),{colspan:"3",class:"text-center py-8 text-muted-foreground"},{default:l(()=>[o("div",Je,[s(de,{class:"h-12 w-12 text-muted-foreground/50"}),i.value?(d(),f("p",Qe," 没有找到匹配的词条 ")):(d(),f("p",Ze," 词汇表为空，请添加词条或导入文件 "))])]),_:1})]),_:1})):V("",!0),(d(!0),f(Ce,null,$e(U.value,([n,N])=>(d(),E(t(z),{key:n},{default:l(()=>[s(t(S),{class:"font-medium"},{default:l(()=>[u(C(n),1)]),_:2},1024),s(t(S),null,{default:l(()=>[y.value?.source===n?(d(),f("div",We,[s(t(T),{modelValue:y.value.target,"onUpdate:modelValue":H=>y.value.target=H,size:"sm",class:"h-8",onKeyup:[M(G,["enter"]),M(L,["esc"])]},null,8,["modelValue","onUpdate:modelValue"]),s(t(m),{size:"sm",variant:"ghost",class:"h-8 px-2",onClick:G},{default:l(()=>[...e[22]||(e[22]=[u(" 保存 ",-1)])]),_:1}),s(t(m),{size:"sm",variant:"ghost",class:"h-8 px-2",onClick:L},{default:l(()=>[...e[23]||(e[23]=[u(" 取消 ",-1)])]),_:1})])):(d(),f("span",{key:1,class:"cursor-pointer hover:text-primary transition-colors",onClick:H=>ce(n,N)},C(N||"-"),9,Ye))]),_:2},1024),s(t(S),{class:"text-right"},{default:l(()=>[s(t(m),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:H=>pe(n)},{default:l(()=>[s(R,{class:"h-4 w-4"}),e[24]||(e[24]=o("span",{class:"sr-only"},"删除",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),F.value>0?(d(),f("div",Xe,[o("p",et," 显示 "+C(U.value.length)+" / "+C(F.value)+" 个词条 ",1),F.value>0?(d(),E(t(m),{key:0,variant:"outline",size:"sm",class:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:xe},{default:l(()=>[s(R,{class:"mr-2 h-4 w-4"}),e[25]||(e[25]=u(" 清空全部 ",-1))]),_:1})):V("",!0)])):V("",!0)]),_:1})]),_:1})]),s(t(q),{open:j.value,"onUpdate:open":e[6]||(e[6]=n=>j.value=n)},{default:l(()=>[s(t(J),null,{default:l(()=>[s(t(Q),null,{default:l(()=>[s(t(Z),null,{default:l(()=>[...e[26]||(e[26]=[u("选择导入策略",-1)])]),_:1}),s(t(le),null,{default:l(()=>[...e[27]||(e[27]=[u(" 请选择如何处理导入的词汇表文件 ",-1)])]),_:1})]),_:1}),o("div",tt,[o("div",{class:g(["flex items-start gap-3 p-4 rounded-lg border cursor-pointer transition-colors",w.value==="merge"?"border-primary bg-primary/5":"hover:bg-accent"]),onClick:e[3]||(e[3]=n=>w.value="merge")},[o("div",st,[o("div",{class:g(["h-4 w-4 rounded-full border-2 flex items-center justify-center",w.value==="merge"?"border-primary":"border-muted-foreground"])},[w.value==="merge"?(d(),f("div",lt)):V("",!0)],2)]),e[28]||(e[28]=o("div",{class:"flex-1"},[o("h4",{class:"font-medium"},"合并 (Merge)"),o("p",{class:"text-sm text-muted-foreground mt-1"}," 将导入的词条与现有词汇表合并，相同词条将被覆盖 ")],-1))],2),o("div",{class:g(["flex items-start gap-3 p-4 rounded-lg border cursor-pointer transition-colors",w.value==="replace"?"border-primary bg-primary/5":"hover:bg-accent"]),onClick:e[4]||(e[4]=n=>w.value="replace")},[o("div",ot,[o("div",{class:g(["h-4 w-4 rounded-full border-2 flex items-center justify-center",w.value==="replace"?"border-primary":"border-muted-foreground"])},[w.value==="replace"?(d(),f("div",at)):V("",!0)],2)]),e[29]||(e[29]=o("div",{class:"flex-1"},[o("h4",{class:"font-medium"},"替换 (Replace)"),o("p",{class:"text-sm text-muted-foreground mt-1"}," 完全替换现有词汇表，导入前请确保已备份重要数据 ")],-1))],2)]),s(t(oe),null,{default:l(()=>[s(t(m),{variant:"outline",onClick:e[5]||(e[5]=n=>j.value=!1)},{default:l(()=>[...e[30]||(e[30]=[u(" 取消 ",-1)])]),_:1}),s(t(m),{onClick:_e},{default:l(()=>[...e[31]||(e[31]=[u(" 确认导入 ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),s(t(q),{open:D.value,"onUpdate:open":e[8]||(e[8]=n=>D.value=n)},{default:l(()=>[s(t(J),null,{default:l(()=>[s(t(Q),null,{default:l(()=>[s(t(Z),null,{default:l(()=>[...e[32]||(e[32]=[u("确认删除",-1)])]),_:1}),s(t(le),null,{default:l(()=>[u(' 确定要删除词条 "'+C(I.value)+'" 吗？此操作不可恢复。 ',1)]),_:1})]),_:1}),s(t(oe),null,{default:l(()=>[s(t(m),{variant:"outline",onClick:e[7]||(e[7]=n=>D.value=!1)},{default:l(()=>[...e[33]||(e[33]=[u(" 取消 ",-1)])]),_:1}),s(t(m),{variant:"destructive",onClick:fe},{default:l(()=>[...e[34]||(e[34]=[u(" 删除 ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),ct=Ve(rt,[["__scopeId","data-v-7c287bb4"]]);export{ct as default};
