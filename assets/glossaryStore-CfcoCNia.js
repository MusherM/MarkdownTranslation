import{a1 as z,w as X,r as Z}from"./index-CKnRBt-b.js";function $(e,u=!1){const T=e.length;let n=0,i="",c=0,o=16,v=0,m=0,A=0,L=0,b=0;function _(t,r){let a=0,k=0;for(;a<t;){let l=e.charCodeAt(n);if(l>=48&&l<=57)k=k*16+l-48;else if(l>=65&&l<=70)k=k*16+l-65+10;else if(l>=97&&l<=102)k=k*16+l-97+10;else break;n++,a++}return a<t&&(k=-1),k}function y(t){n=t,i="",c=0,o=16,b=0}function g(){let t=n;if(e.charCodeAt(n)===48)n++;else for(n++;n<e.length&&B(e.charCodeAt(n));)n++;if(n<e.length&&e.charCodeAt(n)===46)if(n++,n<e.length&&B(e.charCodeAt(n)))for(n++;n<e.length&&B(e.charCodeAt(n));)n++;else return b=3,e.substring(t,n);let r=n;if(n<e.length&&(e.charCodeAt(n)===69||e.charCodeAt(n)===101))if(n++,(n<e.length&&e.charCodeAt(n)===43||e.charCodeAt(n)===45)&&n++,n<e.length&&B(e.charCodeAt(n))){for(n++;n<e.length&&B(e.charCodeAt(n));)n++;r=n}else b=3;return e.substring(t,r)}function w(){let t="",r=n;for(;;){if(n>=T){t+=e.substring(r,n),b=2;break}const a=e.charCodeAt(n);if(a===34){t+=e.substring(r,n),n++;break}if(a===92){if(t+=e.substring(r,n),n++,n>=T){b=2;break}switch(e.charCodeAt(n++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+=`
`;break;case 114:t+="\r";break;case 116:t+="	";break;case 117:const l=_(4);l>=0?t+=String.fromCharCode(l):b=4;break;default:b=5}r=n;continue}if(a>=0&&a<=31)if(U(a)){t+=e.substring(r,n),b=2;break}else b=6;n++}return t}function p(){if(i="",b=0,c=n,m=v,L=A,n>=T)return c=T,o=17;let t=e.charCodeAt(n);if(F(t)){do n++,i+=String.fromCharCode(t),t=e.charCodeAt(n);while(F(t));return o=15}if(U(t))return n++,i+=String.fromCharCode(t),t===13&&e.charCodeAt(n)===10&&(n++,i+=`
`),v++,A=n,o=14;switch(t){case 123:return n++,o=1;case 125:return n++,o=2;case 91:return n++,o=3;case 93:return n++,o=4;case 58:return n++,o=6;case 44:return n++,o=5;case 34:return n++,i=w(),o=10;case 47:const r=n-1;if(e.charCodeAt(n+1)===47){for(n+=2;n<T&&!U(e.charCodeAt(n));)n++;return i=e.substring(r,n),o=12}if(e.charCodeAt(n+1)===42){n+=2;const a=T-1;let k=!1;for(;n<a;){const l=e.charCodeAt(n);if(l===42&&e.charCodeAt(n+1)===47){n+=2,k=!0;break}n++,U(l)&&(l===13&&e.charCodeAt(n)===10&&n++,v++,A=n)}return k||(n++,b=1),i=e.substring(r,n),o=13}return i+=String.fromCharCode(t),n++,o=16;case 45:if(i+=String.fromCharCode(t),n++,n===T||!B(e.charCodeAt(n)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=g(),o=11;default:for(;n<T&&O(t);)n++,t=e.charCodeAt(n);if(c!==n){switch(i=e.substring(c,n),i){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return i+=String.fromCharCode(t),n++,o=16}}function O(t){if(F(t)||U(t))return!1;switch(t){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function j(){let t;do t=p();while(t>=12&&t<=15);return t}return{setPosition:y,getPosition:()=>n,scan:u?j:p,getToken:()=>o,getTokenValue:()=>i,getTokenOffset:()=>c,getTokenLength:()=>n-c,getTokenStartLine:()=>m,getTokenStartCharacter:()=>c-L,getTokenError:()=>b}}function F(e){return e===32||e===9}function U(e){return e===10||e===13}function B(e){return e>=48&&e<=57}var S;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(S||(S={}));new Array(20).fill(0).map((e,u)=>" ".repeat(u));const N=200;new Array(N).fill(0).map((e,u)=>`
`+" ".repeat(u)),new Array(N).fill(0).map((e,u)=>"\r"+" ".repeat(u)),new Array(N).fill(0).map((e,u)=>`\r
`+" ".repeat(u)),new Array(N).fill(0).map((e,u)=>`
`+"	".repeat(u)),new Array(N).fill(0).map((e,u)=>"\r"+"	".repeat(u)),new Array(N).fill(0).map((e,u)=>`\r
`+"	".repeat(u));var I;(function(e){e.DEFAULT={allowTrailingComma:!1}})(I||(I={}));function P(e,u=[],T=I.DEFAULT){let n=null,i=[];const c=[];function o(m){Array.isArray(i)?i.push(m):n!==null&&(i[n]=m)}return K(e,{onObjectBegin:()=>{const m={};o(m),c.push(i),i=m,n=null},onObjectProperty:m=>{n=m},onObjectEnd:()=>{i=c.pop()},onArrayBegin:()=>{const m=[];o(m),c.push(i),i=m,n=null},onArrayEnd:()=>{i=c.pop()},onLiteralValue:o,onError:(m,A,L)=>{u.push({error:m,offset:A,length:L})}},T),i[0]}function K(e,u,T=I.DEFAULT){const n=$(e,!1),i=[];let c=0;function o(f){return f?()=>c===0&&f(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function v(f){return f?s=>c===0&&f(s,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function m(f){return f?s=>c===0&&f(s,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice()):()=>!0}function A(f){return f?()=>{c>0?c++:f(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>i.slice())===!1&&(c=1)}:()=>!0}function L(f){return f?()=>{c>0&&c--,c===0&&f(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:()=>!0}const b=A(u.onObjectBegin),_=m(u.onObjectProperty),y=L(u.onObjectEnd),g=A(u.onArrayBegin),w=L(u.onArrayEnd),p=m(u.onLiteralValue),O=v(u.onSeparator),j=o(u.onComment),t=v(u.onError),r=T&&T.disallowComments,a=T&&T.allowTrailingComma;function k(){for(;;){const f=n.scan();switch(n.getTokenError()){case 4:l(14);break;case 5:l(15);break;case 3:l(13);break;case 1:r||l(11);break;case 2:l(12);break;case 6:l(16);break}switch(f){case 12:case 13:r?l(10):j();break;case 16:l(1);break;case 15:case 14:break;default:return f}}}function l(f,s=[],D=[]){if(t(f),s.length+D.length>0){let E=n.getToken();for(;E!==17;){if(s.indexOf(E)!==-1){k();break}else if(D.indexOf(E)!==-1)break;E=k()}}}function R(f){const s=n.getTokenValue();return f?p(s):(_(s),i.push(s)),k(),!0}function H(){switch(n.getToken()){case 11:const f=n.getTokenValue();let s=Number(f);isNaN(s)&&(l(2),s=0),p(s);break;case 7:p(null);break;case 8:p(!0);break;case 9:p(!1);break;default:return!1}return k(),!0}function M(){return n.getToken()!==10?(l(3,[],[2,5]),!1):(R(!1),n.getToken()===6?(O(":"),k(),V()||l(4,[],[2,5])):l(5,[],[2,5]),i.pop(),!0)}function Y(){b(),k();let f=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(f||l(4,[],[]),O(","),k(),n.getToken()===2&&a)break}else f&&l(6,[],[]);M()||l(4,[],[2,5]),f=!0}return y(),n.getToken()!==2?l(7,[2],[]):k(),!0}function q(){g(),k();let f=!0,s=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(s||l(4,[],[]),O(","),k(),n.getToken()===4&&a)break}else s&&l(6,[],[]);f?(i.push(0),f=!1):i[i.length-1]++,V()||l(4,[],[4,5]),s=!0}return w(),f||i.pop(),n.getToken()!==4?l(8,[4],[]):k(),!0}function V(){switch(n.getToken()){case 3:return q();case 1:return Y();case 10:return R(!0);default:return H()}}return k(),n.getToken()===17?T.allowEmptyContent?!0:(l(4,[],[]),!1):V()?(n.getToken()!==17&&l(9,[],[]),!0):(l(4,[],[]),!1)}var J;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(J||(J={}));var G;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(G||(G={}));const x=P;var Q;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(Q||(Q={}));const W="md-translate-glossary",h=500,C=z("glossary",()=>{const e=Z({});let u=null;function T(){u&&clearTimeout(u),u=setTimeout(()=>{i()},h)}function n(){try{const g=localStorage.getItem(W);g&&(e.value=JSON.parse(g))}catch(g){console.error("加载词汇表失败:",g)}}function i(){try{localStorage.setItem(W,JSON.stringify(e.value))}catch(g){console.error("保存词汇表失败:",g)}}function c(){u&&(clearTimeout(u),u=null),i()}function o(g,w){g.trim()&&(e.value[g.trim()]=w)}function v(g){delete e.value[g]}function m(g,w){g in e.value&&(e.value[g]=w)}function A(){e.value={}}async function L(g,w){try{const p=await g.text(),O=x(p);if(typeof O!="object"||O===null||Array.isArray(O))throw new Error("词汇表必须是 JSON 对象");w.strategy==="replace"?e.value=O:e.value={...e.value,...O}}catch(p){throw console.error("导入词汇表失败:",p),p}}function b(){const g=new Blob([JSON.stringify(e.value,null,2)],{type:"application/json"}),w=URL.createObjectURL(g),p=document.createElement("a");p.href=w;const O=new Date().toISOString().split("T")[0];p.download=`glossary-${O}.json`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(w)}function _(){return Object.keys(e.value).length}function y(g){return g in e.value}return X(e,T,{deep:!0}),n(),{glossary:e,loadFromStorage:n,saveToStorage:i,saveImmediately:c,addEntry:o,removeEntry:v,updateEntry:m,clear:A,hasEntry:y,getEntryCount:_,importFromFile:L,exportToFile:b}});export{C as u};
